"use strict";
window.addEventListener("load", function() {
    //ローディング
    // クラス変更
    const spinner = document.getElementById('loading');
    spinner.classList.add('loaded');
    //safari対策
    window.onpageshow = function (event) {
        if (event.persisted) {
            window.location.reload();
        }
    };

    let startTime,counting;
    let stopedTime = 0;
    let countingTime = 0;
    let time = document.getElementById("time");
    let btn01 = document.getElementById("btn01");
    let btn02 = document.getElementById("btn02");
    let btn03 = document.getElementById("btn03");
    let task = document.getElementById("taskname");
    let endTask = document.getElementById("endtask");
    let alert = document.getElementById("alert");

    function timeFix(seconds){
        const hour = Math.floor(seconds / 1000 / 60 / 60) % 24;
        const min = Math.floor(seconds / 1000 / 60) % 60;
        const sec = Math.floor(seconds / 1000) % 60;
        let times = '';
        if(hour !==0 ) {
          times = `${hour}時間${min}分${sec}秒`;
        }else if(min !==0) {
          times = `${min}分${sec}秒`;
        }else {
          times = `${sec}秒`;
        }
        return times;
    }

    function countTime(){
        stopedTime = 0;
        btn01.disabled = true;
        btn02.disabled = false;
        startTime = Date.now();
        counting = setInterval(() => {
            countingTime = (Date.now() - startTime);
            let fixedTime = timeFix(countingTime)
            time.textContent = fixedTime;
        }, 1000);
    }

    function stopTime(){
        btn01.disabled = false;
        btn02.disabled = true;
        clearInterval(counting);
        stopedTime = (Date.now() - startTime);
        stopedTime = timeFix(stopedTime);
        time.textContent = stopedTime;
        startTime = "";
        console.log(stopedTime);
    }

    function recordTime(){
        
        let count = endTask.childElementCount;
        
        if(stopedTime == 0){
            alert.textContent = "時間が0秒です";
            return;
        }

        if(task.value == ""){
            alert.textContent = "タスク名を入力してください";
            return;
        }

        if(count <= 10){
            let element = task.value;
            let newTask = document.createElement("li");
            newTask.textContent = element;
            newTask.classList.add("endtask__item");
            let newSpan = document.createElement("span");
            newSpan.classList.add("endtask__time");
            newSpan.textContent = ":" + stopedTime;
            newTask.appendChild(newSpan);
            endTask.appendChild(newTask);
            task.value="";
        }
    }

    btn01.addEventListener('click',countTime);
    btn02.addEventListener('click',stopTime);
    btn03.addEventListener('click',recordTime);
});
//# sourceMappingURL=maps/cmn.min.js.map